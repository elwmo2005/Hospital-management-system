<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pharmacy Management - Hospital Management System</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
            background: #f4f4f4;
            color: #333;
            height: 100vh;
            overflow-x: hidden;
        }

        /* Top Header Bar */
        .apex-header {
            background: #13191c;
            height: 50px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 0 20px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }

        .header-left {
            display: flex;
            align-items: center;
        }

        .oracle-logo {
            color: #ff0000;
            font-weight: bold;
            margin-right: 20px;
        }

        .header-right {
            display: flex;
            align-items: center;
            color: #ffffff;
            font-size: 13px;
        }

        .user-info {
            display: flex;
            align-items: center;
            margin-right: 15px;
        }

        .user-avatar {
            width: 28px;
            height: 28px;
            border-radius: 50%;
            background: #3d9aef;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 12px;
            margin-right: 8px;
        }

        /* Main Layout */
        .main-layout {
            display: flex;
            height: calc(100vh - 50px);
        }

        /* Left Sidebar Navigation */
        .sidebar {
            width: 240px;
            background: #2d5563;
            color: #ffffff;
            overflow-y: auto;
            flex-shrink: 0;
        }

        .nav-item {
            padding: 12px 20px;
            cursor: pointer;
            display: flex;
            align-items: center;
            border-bottom: 1px solid rgba(255,255,255,0.1);
            font-size: 14px;
            transition: background-color 0.2s;
        }

        .nav-item:hover {
            background: rgba(255,255,255,0.1);
        }

        .nav-item.active {
            background: rgba(255,255,255,0.2);
            border-left: 3px solid #3d9aef;
        }

        .nav-item .icon {
            margin-right: 10px;
            width: 20px;
            text-align: center;
        }

        .nav-item.has-submenu .arrow {
            margin-left: auto;
            font-size: 10px;
        }

        .nav-submenu {
            background: rgba(0,0,0,0.2);
            display: none;
        }

        .nav-submenu.open {
            display: block;
        }

        .nav-submenu .nav-item {
            padding-left: 45px;
            font-size: 13px;
        }

        /* Content Area */
        .content-area {
            flex: 1;
            background: #f4f4f4;
            overflow-y: auto;
        }

        .content-header {
            background: #ffffff;
            padding: 15px 25px;
            border-bottom: 1px solid #e0e0e0;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .breadcrumb {
            font-size: 13px;
            color: #666;
            margin-bottom: 5px;
        }

        .breadcrumb a {
            color: #3d9aef;
            text-decoration: none;
        }

        .page-title {
            font-size: 24px;
            font-weight: 600;
            color: #333;
            margin: 0;
        }

        .header-actions {
            display: flex;
            gap: 10px;
        }

        /* Main Container */
        .main-container {
            padding: 25px;
            max-width: 1600px;
        }

        /* Three-column layout for pharmacy */
        .pharmacy-layout {
            display: grid;
            grid-template-columns: 350px 1fr 350px;
            gap: 20px;
            height: calc(100vh - 140px);
        }

        /* Left Panel - Prescription Queue */
        .prescription-queue {
            background: white;
            border: 1px solid #d0d0d0;
            border-radius: 4px;
            display: flex;
            flex-direction: column;
        }

        .queue-filters {
            padding: 15px;
            border-bottom: 1px solid #e0e0e0;
            background: #f8f9fa;
        }

        .filter-group {
            margin-bottom: 12px;
        }

        .filter-label {
            font-size: 11px;
            font-weight: 600;
            color: #333;
            margin-bottom: 4px;
            display: block;
        }

        .filter-input {
            width: 100%;
            padding: 6px 8px;
            border: 1px solid #ccc;
            border-radius: 3px;
            font-size: 12px;
            height: 28px;
        }

        .filter-select {
            width: 100%;
            padding: 6px 8px;
            border: 1px solid #ccc;
            border-radius: 3px;
            font-size: 12px;
            height: 28px;
        }

        .filter-row {
            display: flex;
            gap: 8px;
        }

        .filter-row .filter-input,
        .filter-row .filter-select {
            flex: 1;
        }

        .search-button {
            width: 100%;
            padding: 8px 12px;
            background: #3d9aef;
            border: 1px solid #3d9aef;
            border-radius: 3px;
            color: white;
            font-size: 12px;
            cursor: pointer;
            margin-top: 10px;
        }

        .prescriptions-container {
            flex: 1;
            overflow-y: auto;
        }

        .prescription-item {
            padding: 12px 15px;
            border-bottom: 1px solid #f0f0f0;
            cursor: pointer;
            transition: background 0.2s;
            position: relative;
        }

        .prescription-item:hover {
            background: #f8f9fa;
        }

        .prescription-item.selected {
            background: #e8f4fd;
            border-left: 3px solid #3d9aef;
        }

        .prescription-item.urgent {
            border-left: 3px solid #ffc107;
        }

        .prescription-item.stat {
            border-left: 3px solid #dc3545;
        }

        .prescription-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 6px;
        }

        .prescription-id {
            font-weight: 600;
            font-size: 13px;
            color: #333;
        }

        .prescription-priority {
            padding: 2px 6px;
            border-radius: 8px;
            font-size: 9px;
            font-weight: 500;
        }

        .priority-routine { background: #e2e8f0; color: #4a5568; }
        .priority-urgent { background: #fff3cd; color: #856404; }
        .priority-stat { background: #f8d7da; color: #721c24; }

        .prescription-patient {
            font-size: 12px;
            color: #333;
            margin-bottom: 4px;
        }

        .prescription-medication {
            font-size: 11px;
            color: #666;
            margin-bottom: 6px;
            font-weight: 500;
        }

        .prescription-meta {
            display: flex;
            justify-content: space-between;
            font-size: 10px;
            color: #666;
        }

        .prescription-status {
            padding: 1px 4px;
            border-radius: 6px;
            font-size: 9px;
            font-weight: 500;
        }

        .status-pending { background: #fff3cd; color: #856404; }
        .status-verified { background: #cce5ff; color: #004085; }
        .status-filled { background: #d4edda; color: #155724; }
        .status-dispensed { background: #d1ecf1; color: #0c5460; }
        .status-cancelled { background: #f8d7da; color: #721c24; }

        .time-indicator {
            position: absolute;
            top: 8px;
            right: 8px;
            width: 8px;
            height: 8px;
            border-radius: 50%;
        }

        .time-normal { background: #28a745; }
        .time-warning { background: #ffc107; }
        .time-critical { background: #dc3545; }

        /* Center Panel - Prescription Processing */
        .prescription-content {
            background: white;
            border: 1px solid #d0d0d0;
            border-radius: 4px;
            display: flex;
            flex-direction: column;
        }

        .prescription-tabs {
            display: flex;
            border-bottom: 1px solid #e0e0e0;
            background: #f8f9fa;
        }

        .prescription-tab {
            padding: 12px 20px;
            cursor: pointer;
            border-bottom: 3px solid transparent;
            font-size: 13px;
            font-weight: 600;
            transition: all 0.2s;
        }

        .prescription-tab.active {
            background: white;
            border-bottom-color: #3d9aef;
            color: #3d9aef;
        }

        .prescription-tab:hover:not(.active) {
            background: #e9ecef;
        }

        .prescription-processing {
            flex: 1;
            overflow-y: auto;
            padding: 20px;
        }

        /* Prescription Details */
        .prescription-details {
            background: #f8f9fa;
            border: 1px solid #dee2e6;
            border-radius: 4px;
            padding: 15px;
            margin-bottom: 20px;
        }

        .details-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 12px;
        }

        .detail-item {
            display: flex;
            justify-content: space-between;
            font-size: 13px;
        }

        .detail-label {
            font-weight: 600;
            color: #333;
        }

        .detail-value {
            color: #666;
        }

        /* Medication List */
        .medication-list {
            margin-bottom: 20px;
        }

        .medication-card {
            background: white;
            border: 1px solid #dee2e6;
            border-radius: 4px;
            padding: 15px;
            margin-bottom: 12px;
        }

        .medication-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 10px;
        }

        .medication-name {
            font-size: 16px;
            font-weight: 600;
            color: #333;
        }

        .medication-strength {
            font-size: 14px;
            color: #666;
            margin-left: 8px;
        }

        .medication-actions {
            display: flex;
            gap: 8px;
        }

        .medication-details {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 10px;
            margin-bottom: 12px;
            font-size: 12px;
        }

        .medication-instructions {
            background: #f8f9fa;
            border: 1px solid #dee2e6;
            border-radius: 3px;
            padding: 10px;
            font-size: 12px;
            color: #555;
        }

        /* Drug Interactions Alert */
        .interaction-alert {
            background: #fff3cd;
            border: 2px solid #ffc107;
            border-radius: 4px;
            padding: 12px;
            margin-bottom: 15px;
            color: #856404;
        }

        .alert-title {
            font-weight: bold;
            font-size: 14px;
            margin-bottom: 8px;
            display: flex;
            align-items: center;
        }

        .alert-icon {
            margin-right: 8px;
            font-size: 16px;
        }

        /* Right Panel - Drug Information & Actions */
        .pharmacy-panel {
            background: white;
            border: 1px solid #d0d0d0;
            border-radius: 4px;
            display: flex;
            flex-direction: column;
        }

        .panel-section {
            padding: 15px;
            border-bottom: 1px solid #e0e0e0;
        }

        .panel-section:last-child {
            border-bottom: none;
        }

        .section-title {
            font-size: 13px;
            font-weight: 600;
            color: #333;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
        }

        .section-icon {
            margin-right: 8px;
            color: #3d9aef;
        }

        /* Drug Information */
        .drug-info {
            background: #f8f9fa;
            border: 1px solid #dee2e6;
            border-radius: 4px;
            padding: 12px;
            margin-bottom: 15px;
        }

        .drug-name {
            font-size: 14px;
            font-weight: 600;
            color: #333;
            margin-bottom: 6px;
        }

        .drug-details {
            font-size: 11px;
            color: #666;
            line-height: 1.4;
        }

        /* Inventory Status */
        .inventory-status {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 8px;
            margin-bottom: 15px;
        }

        .inventory-item {
            background: #f8f9fa;
            border: 1px solid #dee2e6;
            border-radius: 3px;
            padding: 8px;
            text-align: center;
            font-size: 11px;
        }

        .inventory-number {
            font-size: 16px;
            font-weight: bold;
            color: #333;
            margin-bottom: 2px;
        }

        .inventory-label {
            color: #666;
        }

        .inventory-low {
            border-color: #ffc107;
            background: #fff9c4;
        }

        .inventory-out {
            border-color: #dc3545;
            background: #f8d7da;
        }

        /* Action Buttons */
        .action-button {
            width: 100%;
            padding: 10px 12px;
            margin-bottom: 8px;
            border: 1px solid #ccc;
            border-radius: 3px;
            background: white;
            cursor: pointer;
            font-size: 12px;
            transition: all 0.2s;
            text-align: left;
            display: flex;
            align-items: center;
        }

        .action-button:hover {
            background: #f8f9fa;
            border-color: #3d9aef;
        }

        .action-button.primary {
            background: #3d9aef;
            border-color: #3d9aef;
            color: white;
        }

        .action-button.success {
            background: #28a745;
            border-color: #28a745;
            color: white;
        }

        .action-button.warning {
            background: #ffc107;
            border-color: #ffc107;
            color: #333;
        }

        .action-button.danger {
            background: #dc3545;
            border-color: #dc3545;
            color: white;
        }

        .action-icon {
            margin-right: 8px;
            width: 16px;
        }

        /* Insurance Information */
        .insurance-card {
            background: #e8f4fd;
            border: 1px solid #bee5eb;
            border-radius: 4px;
            padding: 10px;
            margin-bottom: 15px;
        }

        .insurance-header {
            font-size: 12px;
            font-weight: 600;
            color: #333;
            margin-bottom: 6px;
        }

        .insurance-details {
            font-size: 11px;
            color: #666;
            line-height: 1.3;
        }

        /* Form Elements */
        .form-group {
            margin-bottom: 12px;
        }

        .form-label {
            font-size: 12px;
            font-weight: 600;
            color: #333;
            margin-bottom: 4px;
            display: block;
        }

        .form-input {
            width: 100%;
            padding: 6px 8px;
            border: 1px solid #ccc;
            border-radius: 3px;
            font-size: 12px;
            height: 28px;
        }

        .form-textarea {
            width: 100%;
            padding: 6px 8px;
            border: 1px solid #ccc;
            border-radius: 3px;
            font-size: 12px;
            min-height: 60px;
            resize: vertical;
            font-family: inherit;
        }

        .form-select {
            width: 100%;
            padding: 6px 8px;
            border: 1px solid #ccc;
            border-radius: 3px;
            font-size: 12px;
            height: 28px;
        }

        /* Buttons */
        .btn {
            padding: 6px 12px;
            border: 1px solid #ccc;
            border-radius: 3px;
            font-size: 12px;
            cursor: pointer;
            text-decoration: none;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            height: 28px;
            min-width: 80px;
            transition: all 0.2s;
        }

        .btn-primary {
            background: #3d9aef;
            border-color: #3d9aef;
            color: #ffffff;
        }

        .btn-secondary {
            background: #6c757d;
            border-color: #6c757d;
            color: #ffffff;
        }

        .btn-success {
            background: #28a745;
            border-color: #28a745;
            color: #ffffff;
        }

        .btn-warning {
            background: #ffc107;
            border-color: #ffc107;
            color: #212529;
        }

        .btn-danger {
            background: #dc3545;
            border-color: #dc3545;
            color: #ffffff;
        }

        /* Modal */
        .modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.5);
        }

        .modal-content {
            background: white;
            margin: 50px auto;
            padding: 0;
            border-radius: 8px;
            width: 90%;
            max-width: 800px;
            max-height: 80vh;
            overflow-y: auto;
        }

        .modal-header {
            background: linear-gradient(to bottom, #f8f8f8, #e8e8e8);
            border-bottom: 1px solid #d0d0d0;
            padding: 15px 20px;
            font-weight: 600;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .modal-close {
            background: none;
            border: none;
            font-size: 20px;
            cursor: pointer;
            color: #666;
        }

        .modal-body {
            padding: 20px;
        }

        /* Alerts */
        .alert {
            padding: 10px 15px;
            border-radius: 4px;
            margin-bottom: 15px;
            font-size: 12px;
        }

        .alert-success {
            background: #d4edda;
            border: 1px solid #c3e6cb;
            color: #155724;
        }

        .alert-warning {
            background: #fff3cd;
            border: 1px solid #ffeaa7;
            color: #856404;
        }

        .alert-info {
            background: #cce5ff;
            border: 1px solid #b3d7ff;
            color: #004085;
        }

        .alert-danger {
            background: #f8d7da;
            border: 1px solid #f5c6cb;
            color: #721c24;
        }

        /* Region Header */
        .region-header {
            background: linear-gradient(to bottom, #f8f8f8, #e8e8e8);
            border-bottom: 1px solid #d0d0d0;
            padding: 10px 15px;
            font-weight: 600;
            color: #333;
            font-size: 14px;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .region-header .icon {
            margin-right: 8px;
            color: #3d9aef;
        }

        /* Loading States */
        .loading {
            text-align: center;
            padding: 40px;
            color: #666;
        }

        .spinner {
            width: 20px;
            height: 20px;
            border: 2px solid #f3f3f3;
            border-top: 2px solid #3d9aef;
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin: 0 auto 10px;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* Responsive Design */
        @media (max-width: 1200px) {
            .pharmacy-layout {
                grid-template-columns: 320px 1fr 320px;
            }
        }

        @media (max-width: 768px) {
            .sidebar {
                width: 60px;
            }

            .nav-item span:not(.icon) {
                display: none;
            }

            .pharmacy-layout {
                grid-template-columns: 1fr;
                grid-template-rows: auto auto 1fr;
            }

            .main-container {
                padding: 15px;
            }

            .details-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <!-- Top Header -->
    <div class="apex-header">
        <div class="header-left">
            <div class="oracle-logo">ORACLE</div>
            <span style="color: #fff; font-size: 14px;">Hospital Management System</span>
        </div>
        <div class="header-right">
            <div class="user-info">
                <div class="user-avatar">PH</div>
                <span>(Pharmacist)</span>
            </div>
            <span style="margin-right: 15px;">üåê Select Language ‚ñæ</span>
            <span>Main Application</span>
        </div>
    </div>

    <!-- Main Layout -->
    <div class="main-layout">
        <!-- Left Sidebar Navigation -->
        <div class="sidebar">
            <div class="nav-item">
                <span class="icon">üè•</span>
                <span>Hospital Dashboard</span>
            </div>
            
            <div class="nav-item has-submenu" onclick="toggleSubmenu(this)">
                <span class="icon">üë•</span>
                <span>Patient Management</span>
                <span class="arrow">‚ñ∂</span>
            </div>
            <div class="nav-submenu">
                <div class="nav-item"><span>Patient Registration</span></div>
                <div class="nav-item"><span>Patient Search</span></div>
                <div class="nav-item"><span>Admission/Discharge</span></div>
                <div class="nav-item"><span>Emergency Triage</span></div>
            </div>

            <div class="nav-item has-submenu" onclick="toggleSubmenu(this)">
                <span class="icon">ü©∫</span>
                <span>Clinical Module</span>
                <span class="arrow">‚ñ∂</span>
            </div>
            <div class="nav-submenu">
                <div class="nav-item"><span>Medical Records</span></div>
                <div class="nav-item"><span>Vital Signs</span></div>
                <div class="nav-item"><span>Procedure Scheduling</span></div>
                <div class="nav-item"><span>Discharge Planning</span></div>
            </div>

            <div class="nav-item has-submenu" onclick="toggleSubmenu(this)">
                <span class="icon">üî¨</span>
                <span>Laboratory</span>
                <span class="arrow">‚ñ∂</span>
            </div>
            <div class="nav-submenu">
                <div class="nav-item"><span>Test Orders</span></div>
                <div class="nav-item"><span>Sample Tracking</span></div>
                <div class="nav-item"><span>Results Entry</span></div>
                <div class="nav-item"><span>Lab Reports</span></div>
            </div>

            <div class="nav-item has-submenu active" onclick="toggleSubmenu(this)">
                <span class="icon">üíä</span>
                <span>Pharmacy</span>
                <span class="arrow">‚ñº</span>
            </div>
            <div class="nav-submenu open">
                <div class="nav-item active">
                    <span>Prescription Management</span>
                </div>
                <div class="nav-item">
                    <span>Drug Inventory</span>
                </div>
                <div class="nav-item">
                    <span>Dispensing</span>
                </div>
                <div class="nav-item">
                    <span>Drug Interactions</span>
                </div>
            </div>

            <div class="nav-item has-submenu" onclick="toggleSubmenu(this)">
                <span class="icon">üí∞</span>
                <span>Billing & Finance</span>
                <span class="arrow">‚ñ∂</span>
            </div>
            <div class="nav-submenu">
                <div class="nav-item"><span>Invoice Generation</span></div>
                <div class="nav-item"><span>Insurance Claims</span></div>
                <div class="nav-item"><span>Payment Tracking</span></div>
                <div class="nav-item"><span>Financial Reports</span></div>
            </div>

            <div class="nav-item has-submenu" onclick="toggleSubmenu(this)">
                <span class="icon">üë®‚Äç‚öïÔ∏è</span>
                <span>Staff Management</span>
                <span class="arrow">‚ñ∂</span>
            </div>
            <div class="nav-submenu">
                <div class="nav-item"><span>Employee Records</span></div>
                <div class="nav-item"><span>Schedule Management</span></div>
                <div class="nav-item"><span>Department Assignment</span></div>
                <div class="nav-item"><span>Performance Tracking</span></div>
            </div>

            <div class="nav-item has-submenu" onclick="toggleSubmenu(this)">
                <span class="icon">ü§ñ</span>
                <span>AI Analytics</span>
                <span class="arrow">‚ñ∂</span>
            </div>
            <div class="nav-submenu">
                <div class="nav-item"><span>Risk Predictions</span></div>
                <div class="nav-item"><span>Diagnostic Assistance</span></div>
                <div class="nav-item"><span>Model Performance</span></div>
                <div class="nav-item"><span>Classification Results</span></div>
            </div>

            <div class="nav-item has-submenu" onclick="toggleSubmenu(this)">
                <span class="icon">‚öôÔ∏è</span>
                <span>Administration</span>
                <span class="arrow">‚ñ∂</span>
            </div>
            <div class="nav-submenu">
                <div class="nav-item"><span>System Configuration</span></div>
                <div class="nav-item"><span>User Management</span></div>
                <div class="nav-item"><span>Audit Reports</span></div>
                <div class="nav-item"><span>Security Settings</span></div>
            </div>
        </div>

        <!-- Content Area -->
        <div class="content-area">
            <div class="content-header">
                <div>
                    <div class="breadcrumb">
                        <a href="#">Home</a> ‚Ä∫ <a href="#">Pharmacy</a> ‚Ä∫ Prescription Management
                    </div>
                    <h1 class="page-title">Pharmacy Management</h1>
                </div>
                <div class="header-actions">
                    <button class="btn btn-success" onclick="newPrescription()">
                        üíä New Prescription
                    </button>
                    <button class="btn btn-warning" onclick="inventoryManagement()">
                        üì¶ Manage Inventory
                    </button>
                    <button class="btn btn-secondary" onclick="generateReports()">
                        üìä Reports
                    </button>
                </div>
            </div>

            <div class="main-container">
                <!-- Three-column Pharmacy Layout -->
                <div class="pharmacy-layout">
                    <!-- Left Panel - Prescription Queue -->
                    <div class="prescription-queue">
                        <div class="region-header">
                            <span class="icon">üìã</span>
                            Prescription Queue
                            <span id="queueCount" style="background: #3d9aef; color: white; padding: 2px 6px; border-radius: 8px; font-size: 11px;">12</span>
                        </div>
                        <div class="queue-filters">
                            <div class="filter-group">
                                <label class="filter-label">Patient Search</label>
                                <input type="text" class="filter-input" placeholder="Name, MRN, or Phone..." 
                                       id="patientSearchInput" oninput="searchPrescriptions()">
                            </div>
                            
                            <div class="filter-group">
                                <label class="filter-label">Status & Priority</label>
                                <div class="filter-row">
                                    <select class="filter-select" id="statusFilter" onchange="filterPrescriptions()">
                                        <option value="">All Status</option>
                                        <option value="PENDING">Pending</option>
                                        <option value="VERIFIED">Verified</option>
                                        <option value="FILLED">Filled</option>
                                        <option value="DISPENSED">Dispensed</option>
                                    </select>
                                    <select class="filter-select" id="priorityFilter" onchange="filterPrescriptions()">
                                        <option value="">All Priority</option>
                                        <option value="STAT">STAT</option>
                                        <option value="URGENT">Urgent</option>
                                        <option value="ROUTINE">Routine</option>
                                    </select>
                                </div>
                            </div>
                            
                            <div class="filter-group">
                                <label class="filter-label">Date Range</label>
                                <div class="filter-row">
                                    <input type="date" class="filter-input" id="dateFrom" onchange="filterPrescriptions()">
                                    <input type="date" class="filter-input" id="dateTo" onchange="filterPrescriptions()">
                                </div>
                            </div>
                            
                            <button class="search-button" onclick="searchPrescriptions()">
                                üîç Search Prescriptions
                            </button>
                        </div>
                        <div class="prescriptions-container" id="prescriptionsContainer">
                            <!-- Prescription queue items will be loaded here -->
                        </div>
                    </div>

                    <!-- Center Panel - Prescription Processing -->
                    <div class="prescription-content">
                        <div class="prescription-tabs">
                            <div class="prescription-tab active" onclick="switchTab('processing', this)">Processing</div>
                            <div class="prescription-tab" onclick="switchTab('history', this)">History</div>
                            <div class="prescription-tab" onclick="switchTab('profile', this)">Patient Profile</div>
                        </div>

                        <div class="prescription-processing" id="prescriptionProcessing">
                            <div id="defaultContent">
                                <div class="alert alert-info">
                                    <strong>üíä Pharmacy Management Dashboard</strong><br>
                                    Select a prescription from the queue to begin processing. The system will automatically check for drug interactions, verify insurance coverage, and manage inventory.
                                </div>

                                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 20px; margin-top: 20px;">
                                    <div style="background: #f8f9fa; padding: 15px; border-radius: 4px; border: 1px solid #dee2e6;">
                                        <h4 style="margin-bottom: 10px; color: #333;">Today's Activity</h4>
                                        <div style="font-size: 12px; line-height: 1.6;">
                                            <div style="display: flex; justify-content: space-between; margin-bottom: 4px;">
                                                <span>Prescriptions Filled:</span>
                                                <span style="font-weight: 600;">89</span>
                                            </div>
                                            <div style="display: flex; justify-content: space-between; margin-bottom: 4px;">
                                                <span>Pending Verification:</span>
                                                <span style="font-weight: 600; color: #ffc107;">12</span>
                                            </div>
                                            <div style="display: flex; justify-content: space-between; margin-bottom: 4px;">
                                                <span>Drug Interactions:</span>
                                                <span style="font-weight: 600; color: #dc3545;">3</span>
                                            </div>
                                            <div style="display: flex; justify-content: space-between;">
                                                <span>Avg Processing Time:</span>
                                                <span style="font-weight: 600; color: #28a745;">8 minutes</span>
                                            </div>
                                        </div>
                                    </div>

                                    <div style="background: #f8f9fa; padding: 15px; border-radius: 4px; border: 1px solid #dee2e6;">
                                        <h4 style="margin-bottom: 10px; color: #333;">Inventory Alerts</h4>
                                        <div style="font-size: 12px; line-height: 1.6;">
                                            <div style="display: flex; justify-content: space-between; margin-bottom: 4px;">
                                                <span>Low Stock Items:</span>
                                                <span style="font-weight: 600; color: #ffc107;">8</span>
                                            </div>
                                            <div style="display: flex; justify-content: space-between; margin-bottom: 4px;">
                                                <span>Out of Stock:</span>
                                                <span style="font-weight: 600; color: #dc3545;">2</span>
                                            </div>
                                            <div style="display: flex; justify-content: space-between; margin-bottom: 4px;">
                                                <span>Expiring Soon:</span>
                                                <span style="font-weight: 600; color: #856404;">5</span>
                                            </div>
                                            <div style="display: flex; justify-content: space-between;">
                                                <span>Total SKUs:</span>
                                                <span style="font-weight: 600;">1,247</span>
                                            </div>
                                        </div>
                                    </div>

                                    <div style="background: #f8f9fa; padding: 15px; border-radius: 4px; border: 1px solid #dee2e6;">
                                        <h4 style="margin-bottom: 10px; color: #333;">Insurance & Billing</h4>
                                        <div style="font-size: 12px; line-height: 1.6;">
                                            <div style="display: flex; justify-content: space-between; margin-bottom: 4px;">
                                                <span>Claims Processed:</span>
                                                <span style="font-weight: 600;">76</span>
                                            </div>
                                            <div style="display: flex; justify-content: space-between; margin-bottom: 4px;">
                                                <span>Rejected Claims:</span>
                                                <span style="font-weight: 600; color: #dc3545;">4</span>
                                            </div>
                                            <div style="display: flex; justify-content: space-between; margin-bottom: 4px;">
                                                <span>Prior Authorizations:</span>
                                                <span style="font-weight: 600; color: #ffc107;">6</span>
                                            </div>
                                            <div style="display: flex; justify-content: space-between;">
                                                <span>Total Revenue:</span>
                                                <span style="font-weight: 600; color: #28a745;">$12,450</span>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div id="selectedPrescriptionContent" style="display: none;">
                                <!-- Selected prescription details will be loaded here -->
                            </div>
                        </div>
                    </div>

                    <!-- Right Panel - Drug Information & Actions -->
                    <div class="pharmacy-panel">
                        <div class="panel-section">
                            <h4 class="section-title">
                                <span class="section-icon">üíä</span>
                                Drug Information
                            </h4>
                            <div class="drug-info" id="drugInfo">
                                <div style="text-align: center; color: #666; font-size: 11px; padding: 10px;">
                                    Select a prescription to view drug information
                                </div>
                            </div>
                        </div>

                        <div class="panel-section">
                            <h4 class="section-title">
                                <span class="section-icon">üì¶</span>
                                Inventory Status
                            </h4>
                            <div class="inventory-status" id="inventoryStatus">
                                <div class="inventory-item">
                                    <div class="inventory-number">-</div>
                                    <div class="inventory-label">In Stock</div>
                                </div>
                                <div class="inventory-item">
                                    <div class="inventory-number">-</div>
                                    <div class="inventory-label">On Order</div>
                                </div>
                            </div>
                        </div>

                        <div class="panel-section">
                            <h4 class="section-title">
                                <span class="section-icon">‚ö°</span>
                                Quick Actions
                            </h4>
                            <button class="action-button primary" onclick="verifyPrescription()">
                                <span class="action-icon">‚úì</span>
                                Verify Prescription
                            </button>
                            <button class="action-button success" onclick="fillPrescription()">
                                <span class="action-icon">üíä</span>
                                Fill Prescription
                            </button>
                            <button class="action-button warning" onclick="checkInteractions()">
                                <span class="action-icon">‚ö†Ô∏è</span>
                                Check Interactions
                            </button>
                            <button class="action-button" onclick="printLabel()">
                                <span class="action-icon">üè∑Ô∏è</span>
                                Print Label
                            </button>
                            <button class="action-button" onclick="contactPhysician()">
                                <span class="action-icon">üìû</span>
                                Contact Physician
                            </button>
                        </div>

                        <div class="panel-section">
                            <h4 class="section-title">
                                <span class="section-icon">üè•</span>
                                Insurance Information
                            </h4>
                            <div class="insurance-card" id="insuranceInfo">
                                <div style="text-align: center; color: #666; font-size: 11px; padding: 10px;">
                                    Select a prescription to view insurance details
                                </div>
                            </div>
                        </div>

                        <div class="panel-section">
                            <h4 class="section-title">
                                <span class="section-icon">üìã</span>
                                Patient Allergies
                            </h4>
                            <div id="allergyInfo">
                                <div style="text-align: center; color: #666; font-size: 11px; padding: 10px;">
                                    No patient selected
                                </div>
                            </div>
                        </div>

                        <div class="panel-section">
                            <h4 class="section-title">
                                <span class="section-icon">üí¨</span>
                                Pharmacy Notes
                            </h4>
                            <textarea class="form-textarea" id="pharmacyNotes" 
                                      placeholder="Add dispensing notes or patient counseling information..." rows="3"></textarea>
                            <button class="btn btn-secondary" onclick="saveNotes()" style="margin-top: 8px; width: 100%;">
                                Save Notes
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Drug Interaction Modal -->
    <div id="interactionModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>‚ö†Ô∏è Drug Interaction Alert</h3>
                <button class="modal-close" onclick="closeModal('interactionModal')">&times;</button>
            </div>
            <div class="modal-body">
                <div class="alert alert-warning">
                    <strong>DRUG INTERACTION DETECTED</strong><br>
                    The following interaction requires review before dispensing
                </div>
                
                <div id="interactionDetails">
                    <!-- Interaction details will be populated here -->
                </div>

                <div style="display: flex; justify-content: flex-end; gap: 10px; padding-top: 20px; border-top: 1px solid #ddd; margin-top: 20px;">
                    <button type="button" class="btn btn-secondary" onclick="closeModal('interactionModal')">
                        Cancel
                    </button>
                    <button type="button" class="btn btn-warning" onclick="overrideInteraction()">
                        ‚ö†Ô∏è Override with Caution
                    </button>
                    <button type="button" class="btn btn-danger" onclick="contactPhysicianInteraction()">
                        üìû Contact Physician
                    </button>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Sample data
        const prescriptionsData = [
            {
                id: 'RX-2024-1215-001',
                patientName: 'Ahmed Hassan',
                patientId: 'MRN-20241215-0001',
                age: 46,
                phone: '+20-12-345-6789',
                rxDate: '2024-12-15 14:30',
                physician: 'Dr. Johnson',
                priority: 'STAT',
                status: 'PENDING',
                medications: [
                    {
                        name: 'Metoprolol',
                        strength: '50mg',
                        form: 'Tablet',
                        quantity: 30,
                        directions: 'Take 1 tablet twice daily with food',
                        refills: 2,
                        ndc: '12345-678-90'
                    }
                ],
                insurance: {
                    provider: 'Egyptian Health Insurance',
                    id: 'EHI-2024-4567',
                    copay: 'EGP 15'
                },
                allergies: ['Penicillin', 'Sulfa'],
                timeIndicator: 'critical'
            },
            {
                id: 'RX-2024-1215-002',
                patientName: 'Fatima Al-Zahra',
                patientId: 'MRN-20241215-0002',
                age: 29,
                phone: '+20-10-987-6543',
                rxDate: '2024-12-15 13:45',
                physician: 'Dr. Smith',
                priority: 'URGENT',
                status: 'VERIFIED',
                medications: [
                    {
                        name: 'Amoxicillin',
                        strength: '500mg',
                        form: 'Capsule',
                        quantity: 21,
                        directions: 'Take 1 capsule three times daily for 7 days',
                        refills: 0,
                        ndc: '98765-432-10'
                    }
                ],
                insurance: {
                    provider: 'Private Insurance Co.',
                    id: 'PIC-2024-8901',
                    copay: 'EGP 25'
                },
                allergies: ['None Known'],
                timeIndicator: 'warning'
            },
            {
                id: 'RX-2024-1215-003',
                patientName: 'Omar Khaled',
                patientId: 'MRN-20241214-0045',
                age: 62,
                phone: '+20-11-555-7788',
                rxDate: '2024-12-15 12:30',
                physician: 'Dr. Ahmed',
                priority: 'ROUTINE',
                status: 'FILLED',
                medications: [
                    {
                        name: 'Atorvastatin',
                        strength: '20mg',
                        form: 'Tablet',
                        quantity: 90,
                        directions: 'Take 1 tablet daily at bedtime',
                        refills: 5,
                        ndc: '55555-777-88'
                    }
                ],
                insurance: {
                    provider: 'Government Insurance',
                    id: 'GOV-2024-1122',
                    copay: 'EGP 10'
                },
                allergies: ['Aspirin'],
                timeIndicator: 'normal'
            }
        ];

        let selectedPrescription = null;
        let filteredPrescriptions = [...prescriptionsData];
        let currentTab = 'processing';

        // Navigation functionality
        function toggleSubmenu(item) {
            const submenu = item.nextElementSibling;
            const arrow = item.querySelector('.arrow');
            
            if (submenu && submenu.classList.contains('nav-submenu')) {
                submenu.classList.toggle('open');
                arrow.textContent = submenu.classList.contains('open') ? '‚ñº' : '‚ñ∂';
            }
        }

        // Initialize page
        document.addEventListener('DOMContentLoaded', function() {
            loadPrescriptionsQueue();
            
            // Set default date range to today
            const today = new Date().toISOString().split('T')[0];
            document.getElementById('dateFrom').value = today;
            document.getElementById('dateTo').value = today;
        });

        // Load prescriptions queue
        function loadPrescriptionsQueue() {
            const container = document.getElementById('prescriptionsContainer');
            
            container.innerHTML = filteredPrescriptions.map(prescription => `
                <div class="prescription-item ${prescription.priority.toLowerCase()} ${selectedPrescription?.id === prescription.id ? 'selected' : ''}" 
                     onclick="selectPrescription('${prescription.id}')" data-prescription-id="${prescription.id}">
                    <div class="time-indicator ${prescription.timeIndicator}"></div>
                    <div class="prescription-header">
                        <div class="prescription-id">${prescription.id}</div>
                        <div class="prescription-priority priority-${prescription.priority.toLowerCase()}">${prescription.priority}</div>
                    </div>
                    <div class="prescription-patient">${prescription.patientName}</div>
                    <div class="prescription-medication">${prescription.medications[0].name} ${prescription.medications[0].strength}</div>
                    <div class="prescription-meta">
                        <span>${formatTime(prescription.rxDate)}</span>
                        <span class="prescription-status status-${prescription.status.toLowerCase()}">${prescription.status}</span>
                    </div>
                </div>
            `).join('');

            // Update queue count
            document.getElementById('queueCount').textContent = filteredPrescriptions.length;
        }

        // Select prescription
        function selectPrescription(prescriptionId) {
            selectedPrescription = prescriptionsData.find(p => p.id === prescriptionId);
            
            // Update UI selection
            document.querySelectorAll('.prescription-item').forEach(item => {
                item.classList.remove('selected');
            });
            document.querySelector(`[data-prescription-id="${prescriptionId}"]`).classList.add('selected');
            
            // Update prescription details
            updatePrescriptionDetails();
            updateDrugInfo();
            updateInventoryStatus();
            updateInsuranceInfo();
            updateAllergyInfo();
        }

        // Update prescription details
        function updatePrescriptionDetails() {
            if (!selectedPrescription) return;
            
            const defaultContent = document.getElementById('defaultContent');
            const selectedContent = document.getElementById('selectedPrescriptionContent');
            
            defaultContent.style.display = 'none';
            selectedContent.style.display = 'block';
            
            selectedContent.innerHTML = `
                <div class="prescription-details">
                    <div class="details-grid">
                        <div class="detail-item">
                            <span class="detail-label">Prescription ID:</span>
                            <span class="detail-value">${selectedPrescription.id}</span>
                        </div>
                        <div class="detail-item">
                            <span class="detail-label">Patient:</span>
                            <span class="detail-value">${selectedPrescription.patientName}</span>
                        </div>
                        <div class="detail-item">
                            <span class="detail-label">Age:</span>
                            <span class="detail-value">${selectedPrescription.age} years</span>
                        </div>
                        <div class="detail-item">
                            <span class="detail-label">Prescriber:</span>
                            <span class="detail-value">${selectedPrescription.physician}</span>
                        </div>
                        <div class="detail-item">
                            <span class="detail-label">Date Prescribed:</span>
                            <span class="detail-value">${formatDateTime(selectedPrescription.rxDate)}</span>
                        </div>
                        <div class="detail-item">
                            <span class="detail-label">Priority:</span>
                            <span class="detail-value">${selectedPrescription.priority}</span>
                        </div>
                    </div>
                </div>

                ${selectedPrescription.medications.some(med => hasInteraction(med.name)) ? `
                    <div class="interaction-alert">
                        <div class="alert-title">
                            <span class="alert-icon">‚ö†Ô∏è</span>
                            DRUG INTERACTION DETECTED
                        </div>
                        <p>Potential interactions found. Please review before dispensing.</p>
                    </div>
                ` : ''}

                <div class="medication-list">
                    <h3 style="margin-bottom: 15px; color: #333;">Medications</h3>
                    ${selectedPrescription.medications.map(medication => `
                        <div class="medication-card">
                            <div class="medication-header">
                                <div>
                                    <span class="medication-name">${medication.name}</span>
                                    <span class="medication-strength">${medication.strength}</span>
                                </div>
                                <div class="medication-actions">
                                    <button class="btn btn-primary" onclick="fillMedication('${medication.ndc}')">
                                        üíä Fill
                                    </button>
                                    <button class="btn btn-secondary" onclick="viewDrugInfo('${medication.name}')">
                                        ‚ÑπÔ∏è Info
                                    </button>
                                </div>
                            </div>
                            <div class="medication-details">
                                <div><strong>Form:</strong> ${medication.form}</div>
                                <div><strong>Quantity:</strong> ${medication.quantity}</div>
                                <div><strong>Refills:</strong> ${medication.refills}</div>
                                <div><strong>NDC:</strong> ${medication.ndc}</div>
                            </div>
                            <div class="medication-instructions">
                                <strong>Directions for Use:</strong><br>
                                ${medication.directions}
                            </div>
                        </div>
                    `).join('')}
                </div>
            `;
        }

        // Update drug info
        function updateDrugInfo() {
            const drugInfo = document.getElementById('drugInfo');
            
            if (!selectedPrescription) {
                drugInfo.innerHTML = '<div style="text-align: center; color: #666; font-size: 11px; padding: 10px;">Select a prescription to view drug information</div>';
                return;
            }
            
            const medication = selectedPrescription.medications[0];
            drugInfo.innerHTML = `
                <div class="drug-name">${medication.name} ${medication.strength}</div>
                <div class="drug-details">
                    <strong>Generic Name:</strong> ${getGenericName(medication.name)}<br>
                    <strong>Drug Class:</strong> ${getDrugClass(medication.name)}<br>
                    <strong>Therapeutic Use:</strong> ${getTherapeuticUse(medication.name)}<br>
                    <strong>Common Side Effects:</strong> ${getSideEffects(medication.name)}
                </div>
            `;
        }

        // Update inventory status
        function updateInventoryStatus() {
            const inventoryStatus = document.getElementById('inventoryStatus');
            
            if (!selectedPrescription) {
                inventoryStatus.innerHTML = `
                    <div class="inventory-item">
                        <div class="inventory-number">-</div>
                        <div class="inventory-label">In Stock</div>
                    </div>
                    <div class="inventory-item">
                        <div class="inventory-number">-</div>
                        <div class="inventory-label">On Order</div>
                    </div>
                `;
                return;
            }
            
            const medication = selectedPrescription.medications[0];
            const stock = getInventoryCount(medication.name);
            
            inventoryStatus.innerHTML = `
                <div class="inventory-item ${stock.inStock < 10 ? 'inventory-low' : ''}">
                    <div class="inventory-number">${stock.inStock}</div>
                    <div class="inventory-label">In Stock</div>
                </div>
                <div class="inventory-item">
                    <div class="inventory-number">${stock.onOrder}</div>
                    <div class="inventory-label">On Order</div>
                </div>
            `;
        }

        // Update insurance info
        function updateInsuranceInfo() {
            const insuranceInfo = document.getElementById('insuranceInfo');
            
            if (!selectedPrescription) {
                insuranceInfo.innerHTML = '<div style="text-align: center; color: #666; font-size: 11px; padding: 10px;">Select a prescription to view insurance details</div>';
                return;
            }
            
            const insurance = selectedPrescription.insurance;
            insuranceInfo.innerHTML = `
                <div class="insurance-header">${insurance.provider}</div>
                <div class="insurance-details">
                    <strong>Policy ID:</strong> ${insurance.id}<br>
                    <strong>Copay:</strong> ${insurance.copay}<br>
                    <strong>Status:</strong> Active<br>
                    <strong>Prior Auth:</strong> Not Required
                </div>
            `;
        }

        // Update allergy info
        function updateAllergyInfo() {
            const allergyInfo = document.getElementById('allergyInfo');
            
            if (!selectedPrescription) {
                allergyInfo.innerHTML = '<div style="text-align: center; color: #666; font-size: 11px; padding: 10px;">No patient selected</div>';
                return;
            }
            
            const allergies = selectedPrescription.allergies;
            allergyInfo.innerHTML = allergies.map(allergy => `
                <div style="background: ${allergy === 'None Known' ? '#d4edda' : '#f8d7da'}; 
                            border: 1px solid ${allergy === 'None Known' ? '#c3e6cb' : '#f5c6cb'}; 
                            border-radius: 3px; padding: 6px; margin-bottom: 4px; font-size: 11px;">
                    ${allergy === 'None Known' ? '‚úì' : '‚ö†Ô∏è'} ${allergy}
                </div>
            `).join('');
        }

        // Helper functions
        function hasInteraction(drugName) {
            return drugName === 'Metoprolol'; // Simulate interaction
        }

        function getGenericName(drugName) {
            const generics = {
                'Metoprolol': 'Metoprolol Tartrate',
                'Amoxicillin': 'Amoxicillin Trihydrate',
                'Atorvastatin': 'Atorvastatin Calcium'
            };
            return generics[drugName] || drugName;
        }

        function getDrugClass(drugName) {
            const classes = {
                'Metoprolol': 'Beta Blocker',
                'Amoxicillin': 'Antibiotic (Penicillin)',
                'Atorvastatin': 'Statin (HMG-CoA Reductase Inhibitor)'
            };
            return classes[drugName] || 'Unknown';
        }

        function getTherapeuticUse(drugName) {
            const uses = {
                'Metoprolol': 'Hypertension, Angina, Heart Failure',
                'Amoxicillin': 'Bacterial Infections',
                'Atorvastatin': 'Hypercholesterolemia, Cardiovascular Disease Prevention'
            };
            return uses[drugName] || 'Various conditions';
        }

        function getSideEffects(drugName) {
            const effects = {
                'Metoprolol': 'Fatigue, dizziness, cold extremities',
                'Amoxicillin': 'Nausea, diarrhea, skin rash',
                'Atorvastatin': 'Muscle pain, elevated liver enzymes'
            };
            return effects[drugName] || 'Consult drug reference';
        }

        function getInventoryCount(drugName) {
            const inventory = {
                'Metoprolol': { inStock: 45, onOrder: 100 },
                'Amoxicillin': { inStock: 8, onOrder: 50 },
                'Atorvastatin': { inStock: 120, onOrder: 0 }
            };
            return inventory[drugName] || { inStock: 0, onOrder: 0 };
        }

        // Action functions
        function verifyPrescription() {
            if (!selectedPrescription) {
                showAlert('warning', 'Please select a prescription to verify.');
                return;
            }
            
            selectedPrescription.status = 'VERIFIED';
            loadPrescriptionsQueue();
            showAlert('success', `Prescription ${selectedPrescription.id} verified successfully.`);
        }

        function fillPrescription() {
            if (!selectedPrescription) {
                showAlert('warning', 'Please select a prescription to fill.');
                return;
            }
            
            if (selectedPrescription.status !== 'VERIFIED') {
                showAlert('warning', 'Prescription must be verified before filling.');
                return;
            }
            
            selectedPrescription.status = 'FILLED';
            loadPrescriptionsQueue();
            showAlert('success', `Prescription ${selectedPrescription.id} filled successfully.`);
        }

        function checkInteractions() {
            if (!selectedPrescription) {
                showAlert('warning', 'Please select a prescription to check interactions.');
                return;
            }
            
            if (hasInteraction(selectedPrescription.medications[0].name)) {
                document.getElementById('interactionModal').style.display = 'block';
                document.getElementById('interactionDetails').innerHTML = `
                    <div style="background: #f8f9fa; padding: 15px; border-radius: 4px; margin: 15px 0;">
                        <h4>Interaction Details:</h4>
                        <p><strong>Drug:</strong> ${selectedPrescription.medications[0].name}</p>
                        <p><strong>Interacts with:</strong> Patient's current Warfarin therapy</p>
                        <p><strong>Severity:</strong> Moderate</p>
                        <p><strong>Clinical Effect:</strong> May increase bleeding risk when used together</p>
                        <p><strong>Management:</strong> Monitor INR more frequently; consider dose adjustment</p>
                    </div>
                `;
            } else {
                showAlert('success', 'No drug interactions detected.');
            }
        }

        function printLabel() {
            if (!selectedPrescription) {
                showAlert('warning', 'Please select a prescription to print label.');
                return;
            }
            
            showAlert('success', `Label printed for ${selectedPrescription.medications[0].name}.`);
        }

        function contactPhysician() {
            if (!selectedPrescription) {
                showAlert('warning', 'Please select a prescription first.');
                return;
            }
            
            showAlert('info', `Contacting ${selectedPrescription.physician} regarding prescription ${selectedPrescription.id}.`);
        }

        function saveNotes() {
            const notes = document.getElementById('pharmacyNotes').value;
            if (notes.trim()) {
                showAlert('success', 'Pharmacy notes saved successfully.');
            }
        }

        // Switch tabs
        function switchTab(tabName, element) {
            document.querySelectorAll('.prescription-tab').forEach(tab => {
                tab.classList.remove('active');
            });
            element.classList.add('active');
            currentTab = tabName;
            
            // Load appropriate content based on tab
            if (tabName === 'processing') {
                updatePrescriptionDetails();
            } else if (tabName === 'history') {
                showAlert('info', 'Patient medication history would be displayed here.');
            } else if (tabName === 'profile') {
                showAlert('info', 'Complete patient profile would be displayed here.');
            }
        }

        // Search and filter functions
        function searchPrescriptions() {
            const searchTerm = document.getElementById('patientSearchInput').value.toLowerCase();
            filterPrescriptions();
        }

        function filterPrescriptions() {
            const searchTerm = document.getElementById('patientSearchInput').value.toLowerCase();
            const statusFilter = document.getElementById('statusFilter').value;
            const priorityFilter = document.getElementById('priorityFilter').value;
            const dateFrom = document.getElementById('dateFrom').value;
            const dateTo = document.getElementById('dateTo').value;
            
            filteredPrescriptions = prescriptionsData.filter(prescription => {
                const matchesSearch = !searchTerm || 
                    prescription.patientName.toLowerCase().includes(searchTerm) ||
                    prescription.patientId.toLowerCase().includes(searchTerm) ||
                    prescription.phone.includes(searchTerm);
                
                const matchesStatus = !statusFilter || prescription.status === statusFilter;
                const matchesPriority = !priorityFilter || prescription.priority === priorityFilter;
                
                const matchesDateRange = (!dateFrom || prescription.rxDate >= dateFrom) &&
                    (!dateTo || prescription.rxDate <= dateTo + 'T23:59:59');
                
                return matchesSearch && matchesStatus && matchesPriority && matchesDateRange;
            });
            
            loadPrescriptionsQueue();
        }

        // Modal functions
        function closeModal(modalId) {
            document.getElementById(modalId).style.display = 'none';
        }

        function overrideInteraction() {
            showAlert('warning', 'Drug interaction overridden. Please document reason and monitor patient closely.');
            closeModal('interactionModal');
        }

        function contactPhysicianInteraction() {
            showAlert('info', 'Contacting prescribing physician regarding drug interaction.');
            closeModal('interactionModal');
        }

        // Header action functions
        function newPrescription() {
            showAlert('info', 'New prescription entry form would open here.');
        }

        function inventoryManagement() {
            showAlert('info', 'Inventory management interface would open here.');
        }

        function generateReports() {
            showAlert('info', 'Pharmacy reports interface would open here.');
        }

        // Utility functions
        function formatDateTime(dateTimeString) {
            const date = new Date(dateTimeString);
            return date.toLocaleDateString() + ' ' + date.toLocaleTimeString([], {hour: '2-digit', minute:'2-digit'});
        }

        function formatTime(dateTimeString) {
            const date = new Date(dateTimeString);
            return date.toLocaleTimeString([], {hour: '2-digit', minute:'2-digit'});
        }

        function showAlert(type, message) {
            const alertDiv = document.createElement('div');
            alertDiv.className = `alert alert-${type}`;
            alertDiv.textContent = message;
            
            document.querySelector('.main-container').insertBefore(alertDiv, document.querySelector('.main-container').firstChild);
            
            setTimeout(() => {
                alertDiv.remove();
            }, 5000);
        }

        // Close modal when clicking outside
        window.onclick = function(event) {
            const modals = document.querySelectorAll('.modal');
            modals.forEach(modal => {
                if (event.target === modal) {
                    modal.style.display = 'none';
                }
            });
        }

        console.log('Pharmacy Management System Initialized');
    </script>
</body>
</html>